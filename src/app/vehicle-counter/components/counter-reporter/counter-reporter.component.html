<h1 class="m-3">Reporte conteo de vehiculos</h1>
<div>
    <mat-form-field class="example-full-width m-5 mt-1 mb-1">
        <mat-label>Estaci√≥n</mat-label>
        <input matInput [(ngModel)]="station">
    </mat-form-field>

    <button mat-raised-button color="primary" (click)="initializeData()" [disabled]="showSpinner">Filtrar</button>
</div>

<div *ngIf="dataSource && !showSpinner">
    <table class="table table-bordered">
        <thead>
            <tr>
                <th scope="col">Fecha</th>
                <th scope="col" colspan="4" *ngFor="let column of displayedColumns">{{ column }}</th>
            </tr>
        </thead>
        <tbody class="table-group-divider">
            <tr>
                <th scope="col"></th>
                <th scope="col" colspan="4" *ngFor="let column of displayedColumns" class="m-3"><span>Total <strong>|</strong>
                        Valor</span>
                </th>
            </tr>
            <tr *ngFor="let date of summaryDates">
                <th scope="row">{{ date.date }}</th>
                <td colspan="4" *ngFor="let item of date.totalByDate">{{ item.totalVehicles }} <strong>|</strong> {{ item.totalAmount |
                    currency }}</td>
            </tr>
            <tr>
                <th scope="row">Total</th>
                <th scope="col" colspan="4" *ngFor="let item of dataSource.vehicleCounterSummaryList" class="m-3">{{
                    item.vehicleCount }} | {{ item.totalAmount | currency }}
                </th>
            </tr>
        </tbody>
    </table>

    <table class="table table-bordered">
        <tbody class="table-group-divider">
            <tr>
                <th rowspan="2">Totales</th>
                <td rowspan="1">{{ dataSource.totalCarsGeneral }}</td>
                <td rowspan="1">{{ dataSource.totalAmountGeneral | currency }}</td>
            </tr>
        </tbody>
    </table>
</div>

<mat-spinner *ngIf="showSpinner"></mat-spinner>